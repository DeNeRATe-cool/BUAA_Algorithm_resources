# J 妮妮的木棍

* 一句话题意：水平面上有 $n\le 3e5$ 条线段，每条线段通过两个端点确定，形如 $(-10^9,a_i),(b_i,10^9)$ ，且保证 $\{a_n\},\{b_n\}$ 递增，现有 $m\le 3e5$ 组询问，每次询问线段 $(x_1,y_1),(x_2,y_2),|x_i|,|y_i|\le 1e9$ ，判断此线段与这 $n$ 条线段是否相交，不相交则输出其下方最靠上的线段编号
* 由 $\{a_n\},\{b_n\}$ 递增知，这 $n$ 条线段互不相交，且依次从下到上，这提供了可二分性
* 对于 $1\le i<j\le n$ ，若第 $j$ 条线段在某线段下方，第 $i$ 条线段上方也在改线段下方
* 故我们可以采用二分的方法对于每条线段找到在其下**编号最大**的线段 $k$ ，然后判断与 $k+1$ 的关系
  * 若线段 $k+1$ 与其相交，则结果显然为相交
  * 若线段 $k+1$ 与其不相交，意即该线段在第 $k+1$ 条线段下方，则其上所有线段都在该线段上方，与该线段无交点，此时答案为 $k$ 
* 需注意线段端点在这 $n$ 条线段上时也视为相交，注意判断函数的实现，时间复杂度 $O(m\log n)$

